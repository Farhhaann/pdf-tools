<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Images to PDF</title>

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="container">

  <!-- BACK -->
  <a href="index.html" class="back-link">← Back to Home</a>

  <h1>🖼️ Images to PDF</h1>
  <p class="subtitle">Convert multiple images into a single PDF</p>

  <!-- FILE NAME -->
  <label for="fileName">PDF File Name</label>
  <input type="text" id="fileName" placeholder="images-pdf">

  <!-- IMAGE INPUT -->
  <label for="images">Select Images</label>
  <input type="file" id="images" accept="image/*" multiple>

  <!-- BUTTON -->
  <div class="buttons">
    <button onclick="convertImagesToPDF()">Convert to PDF</button>
  </div>

  <p class="note">Supported formats: JPG, PNG</p>

</div>

<script>
const { jsPDF } = window.jspdf;

async function convertImagesToPDF() {
  const imageInput = document.getElementById("images");
  const fileNameInput = document.getElementById("fileName");

  if (!imageInput.files.length) {
    alert("Please select at least one image");
    return;
  }

  let fileName = "images";
  if (fileNameInput.value.trim()) {
    fileName = fileNameInput.value.trim();
  }

  const pdf = new jsPDF();

  for (let i = 0; i < imageInput.files.length; i++) {
    const file = imageInput.files[i];
    const imgData = await readImage(file);

    if (i > 0) pdf.addPage();

    pdf.addImage(imgData, "JPEG", 10, 10, 190, 0);
  }

  pdf.save(fileName + ".pdf");
}

function readImage(file) {
  return new Promise((resolve) => {
    const reader = new FileReader();
    reader.onload = e => resolve(e.target.result);
    reader.readAsDataURL(file);
  });
}
</script>

</body>
</html>